<!DOCTYPE html>
<html>
<head>
    <title>高级IRR计算器（自动更新版）</title>
    <style>
        .input-group { margin: 10px; }
        label { display: inline-block; width: 200px; }
    </style>
</head>
<body>
    <h2>高级IRR计算器（自动更新版）</h2>
    
    <!-- 输入参数 -->
    <div class="input-group">
        <label>供款年数：</label>
        <input type="number" id="payment-years" value="5" onchange="calculateAdvancedIRR()">
    </div>
    <div class="input-group">
        <label>每年供款金额：</label>
        <input type="number" id="annual-payment" value="12810" onchange="calculateAdvancedIRR()">
    </div>
    <div class="input-group">
        <label>开始提取年份：</label>
        <input type="number" id="withdrawal-start" value="6" onchange="calculateAdvancedIRR()">
    </div>
    <div class="input-group">
        <label>提取次数：</label>
        <input type="number" id="withdrawal-years" value="14" onchange="calculateAdvancedIRR()">
    </div>
    <div class="input-group">
        <label>每次提取金额：</label>
        <input type="number" id="withdrawal-amount" value="3843" onchange="calculateAdvancedIRR()">
    </div>
    <div class="input-group">
        <label>回报年份：</label>
        <input type="number" id="final-year" value="20" onchange="calculateAdvancedIRR()">
    </div>
    <div class="input-group">
        <label>最终回報金額：</label>
        <input type="number" id="final-amount" value="65620" onchange="calculateAdvancedIRR()">
    </div>

    <div id="result" style="margin-top: 20px; color: blue;"></div>
<script src="irrCalculator.js"></script>
<script>
    function calculateAdvancedIRR() {
        try {
            // 获取输入参数
            const paymentYears = parseInt(document.getElementById('payment-years').value);
            const annualPayment = parseFloat(document.getElementById('annual-payment').value);
            const withdrawalStart = parseInt(document.getElementById('withdrawal-start').value);
            const withdrawalTimes = parseInt(document.getElementById('withdrawal-years').value);
            const withdrawalAmount = parseFloat(document.getElementById('withdrawal-amount').value);
            const finalYear = parseInt(document.getElementById('final-year').value);
            const finalAmount = parseFloat(document.getElementById('final-amount').value);

            // 调用分拆后的计算逻辑
            const irr = calculateIRR(paymentYears, annualPayment, withdrawalStart, withdrawalTimes, withdrawalAmount, finalYear, finalAmount);

            // 显示结果
            document.getElementById('result').innerHTML = 
                `内部回报率 (IRR): <strong>${(irr * 100).toFixed(2)}%</strong>`;
        } catch (error) {
            alert('错误: ' + error.message);
        }
    }
</script>

</body>
</html>
        
           
